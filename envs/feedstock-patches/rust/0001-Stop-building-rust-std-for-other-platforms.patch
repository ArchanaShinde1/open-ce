From f8eccbbdeee8204ab004f706cf1f0de13f400ef0 Mon Sep 17 00:00:00 2001
From: ARchanaShinde1 <archana.shinde2504@gmail.com>
Date: Fri, 25 Aug 2023 10:08:10 +0000
Subject: [PATCH] Stop building rust-std for other platforms

---
 recipe/conda_build_config.yaml | 18 +++++++++---------
 recipe/meta.yaml               | 32 ++++++++++++++++----------------
 2 files changed, 25 insertions(+), 25 deletions(-)

diff --git a/recipe/conda_build_config.yaml b/recipe/conda_build_config.yaml
index 1292a7d..ca7b268 100644
--- a/recipe/conda_build_config.yaml
+++ b/recipe/conda_build_config.yaml
@@ -6,12 +6,12 @@ rust_arch:
   - x86_64-apple-darwin         # [osx and x86_64]
   - aarch64-apple-darwin        # [osx and arm64]
 
-rust_std_extra:
-  - aarch64-apple-ios
-  - x86_64-apple-ios
-  - aarch64-apple-ios-sim
-  - aarch64-linux-android
-  - arm-linux-androideabi
-  - armv7-linux-androideabi
-  - i686-linux-android
-  - x86_64-linux-android
+#rust_std_extra:
+#  - aarch64-apple-ios
+#  - x86_64-apple-ios
+#  - aarch64-apple-ios-sim
+#  - aarch64-linux-android
+#  - arm-linux-androideabi
+#  - armv7-linux-androideabi
+#  - i686-linux-android
+#  - x86_64-linux-android
diff --git a/recipe/meta.yaml b/recipe/meta.yaml
index d251b6e..71dd74c 100644
--- a/recipe/meta.yaml
+++ b/recipe/meta.yaml
@@ -159,22 +159,22 @@ outputs:
         - if not exist "%LIBRARY_PREFIX%/lib/rustlib/src" exit 1  # [win]
 
 
-  - name: rust-std-{{ rust_std_extra }}
-    script: install-rust-std-extra.sh
-    build:
-      noarch: generic
-      skip: {{ rust_arch != "x86_64-unknown-linux-gnu" }}
-    requirements:
-      run_constrained:
-        # Having different versions of rust-std and rust is confusing.
-        - {{ pin_subpackage("rust", min_pin="x.x.x", max_pin="x.x.x") }}
-    test:
-      commands:
-        - test -d $PREFIX/lib/rustlib/{{ rust_std_extra }}
-        - test -f $PREFIX/lib/rustlib/manifest-rust-std-{{ rust_std_extra }}
-        # Make sure that the outputs do not clobber with other rust components
-        - test -z "$(ls "${PREFIX}"/lib/rustlib/ | grep -v {{ rust_std_extra }})"
-        - echo {{ rust_std_extra }}
+#  - name: rust-std-{{ rust_std_extra }}
+#    script: install-rust-std-extra.sh
+#    build:
+#      noarch: generic
+#      skip: {{ rust_arch != "x86_64-unknown-linux-gnu" }}
+#    requirements:
+#      run_constrained:
+#        # Having different versions of rust-std and rust is confusing.
+#        - {{ pin_subpackage("rust", min_pin="x.x.x", max_pin="x.x.x") }}
+#    test:
+#      commands:
+#        - test -d $PREFIX/lib/rustlib/{{ rust_std_extra }}
+#        - test -f $PREFIX/lib/rustlib/manifest-rust-std-{{ rust_std_extra }}
+#        # Make sure that the outputs do not clobber with other rust components
+#        - test -z "$(ls "${PREFIX}"/lib/rustlib/ | grep -v {{ rust_std_extra }})"
+#        - echo {{ rust_std_extra }}
 
 about:
   home: https://www.rust-lang.org
-- 
2.40.1

